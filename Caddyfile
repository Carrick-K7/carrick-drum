# Caddyfile for Carrick Drum App
# Handles SPA routing with history mode

drum.carrick.local {
    root * /var/www/drum-app/dist
    file_server

    # Handle SPA routing - fallback to index.html for all non-file routes
    try_files {path} /index.html

    # Enable gzip compression
    encode gzip

    # Cache static assets
    header /assets/* {
        Cache-Control "public, max-age=31536000, immutable"
    }
}

# Production domain
drum.example.com {
    root * /var/www/drum-app/dist
    file_server
    try_files {path} /index.html
    encode gzip
    header /assets/* {
        Cache-Control "public, max-age=31536000, immutable"
    }
}
